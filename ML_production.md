<h1 dir='rtl'> Model to Production </h1>

<p dir ='rtl'>
اینجا میخوام در مورد نحوه بردن مدل آموزش داده شده به پروداکشن توضیح بدم.<br>
اول از همه بهتره که کدها رو بصورت پایپلاین شده بنویسیم. خود سایکیت لرن پایپ لاین داره و از اون استفاده میکنیم. در یه پست جداگانه ای در مورد ساخت پایپ لاین هم توضیح میدم بعدا. بعد از اینکه مدل رو آموزش دادیم و همه بهبودها رو انجام دادیم، میرسیم به ذخیره کردن مدل. برای مدل های تنسورفلو/کراس میتونیم وزن ها رو ذخیره کنیم و بعدا توی فایل پیش بینی، اون رو لود کنیم. برای سایکیت لرن که این وزن ها رو در اختیار قرار نمیده، مخصوصا برای درخت تصمیم ها و غیره، میتونیم از joblib استفاده کنیم. بعد از اینکه پایپ لاین رو ساختیم، با استفاده از joblib.dump میتونیم پایپ لاین رو ذخیره کنیم و بعدا بازیابی کنیم. نکته مهمی که اینجا وجود داره اینه که اگه توی پایپ لاین، یه کلاس مخصوصی ایجاد کردیم، باید این کلاس رو توی یه فایلی ذخیره کنیم و توی فایل پیش بینی لودش کنیم، در غیر اینصورت پایپ لاین بصورت درست لود نمیشه و خطا میده.<br>
بعد از اون میرسیم به سرویسی که این درخواست ها رو بگیره و پاسخ رو برگردونه. میتونیم از flask , Dash استفاده کنیم. استفاده هر دوی این ها راحته ولی بخاطر ضعف اینها (از جمله عدم  concurrency) نمیتونیم مستقیما توی پروداکشن استفاده کنیم و درخواست های کاربر رو مستقیما بدیم. بخاطر همین میایم از uwsgi استفاده میکنیم. این میاد هم روندی ایجاد میکنه و همچنین توزیع بار انجام میده؛ مثلا میتونیم مشخصا کنیم چند تا نمونه از این سرور همزمان ایجاد بشه. البته باز خود این رو مستقیم استفاده نمیکنیم و از سرویس هایی مثل nginx برای نقطه ورود به اپلیکیشن استفاده میکنیم. <br>
توی ریپوزیتوری ساخت داشبورد با Dash یک نمونه فایل تنظیمات برای استفاده از uwsgi آوردم.<br>
بعد از این میرسیم به تست پروداکشن. برای این قسمت میتونیم از Locust استفاده کنیم. با استفاده از این میتونیم بخش های مختلف سرویس رو تست کنیم. برای مانیتور کردن uwsgi هم از uwsgitop استفاده میکنیم که پارامترهای مختلفی رو برامون نمایش میده.
</p>